"use strict";(self.webpackChunkmy_gatsby_site=self.webpackChunkmy_gatsby_site||[]).push([[351],{76351:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});n(81804);var o,r=n(42611),i=n(8775),a=n(52155),u=n(2784),l=new Uint8Array(16);function s(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(l)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(t){return"string"==typeof t&&d.test(t)},f=[],p=0;p<256;++p)f.push((p+256).toString(16).substr(1));var m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(f[t[e+0]]+f[t[e+1]]+f[t[e+2]]+f[t[e+3]]+"-"+f[t[e+4]]+f[t[e+5]]+"-"+f[t[e+6]]+f[t[e+7]]+"-"+f[t[e+8]]+f[t[e+9]]+"-"+f[t[e+10]]+f[t[e+11]]+f[t[e+12]]+f[t[e+13]]+f[t[e+14]]+f[t[e+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n};var g=function(t,e,n){var o=(t=t||{}).random||(t.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=o[r];return e}return m(o)},v=n(32226),y=n(3862),h=n(6309),b=n(8162);function I(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var C=n(50786),S=n(18778),w=(0,b.X)((function(){var t=(0,y.TL)(),e=(0,v.kp)(),n=(0,v.KJ)(),o=(0,r.q)(),l=(0,y.CG)((function(t){return t.site.routing.dynamicPaths})),s=u.useMemo((function(){return e.templates.map((function(t){return t.TemplateName}))}),[e.templates]),d=u.useState(null),c=d[0],f=d[1],p=u.useState(null),m=p[0],b=p[1];u.useEffect((function(){if(m){var e=function(t,e){var n=e.nodes,o={},r=[],i=function(t,e){return"/"+function t(n,o){var r;void 0===o&&(o="");var i=e[n],a=null===(r=i.parent)||void 0===r?void 0:r.id,u=a&&e[a],l=i.slug+"/"+o;return a&&u?t(a,l):l}(t)}(t,n);return function t(e,a){void 0===a&&(a=i),o[a]=e,r.push(e);for(var u,l=I(n[e].children);!(u=l()).done;){var s=u.value,d=""+a+n[s.id].slug;t(s.id,d)}}(t),{dynamicPaths:o,affectedIds:r}}(m,n);t(h.bR({dynamicPaths:e})),b(null)}}),[n]);var P=function(t){b(t)},w=function(e,o){var r=n.nodes[e].pageMetadata;t(h.T$({pageId:e,slug:o.slug,meta:{title:o.title||(null==r?void 0:r.title),description:o.description||(null==r?void 0:r.description),image:o.image||(null==r?void 0:r.image),isBlogPost:o.isBlogPost||(null==r?void 0:r.isBlogPost),datePublished:o.lastPublished||(null==r?void 0:r.datePublished)}})),P(e),j(e)},j=function(t){var e,o=n.nodes;t&&((e=Object.keys(l).find((function(e){return l[e]===t})))||(e=o[t].path)),("undefined"!=typeof window&&window.location.pathname)!==e&&(0,a.c4)(e||"/")},k=u.useMemo((function(){return t=n.nodes,Object.fromEntries(Object.entries(t).map((function(t){var e,n=t[0],o=t[1],r=o.title,i=o.slug,a=o.parent,u=o.children,l=o.template,s=o.pageMetadata;return[n,{data:{slug:i||(null==o||null===(e=o.path)||void 0===e?void 0:e.split("/")[1])||"root",title:(null==s?void 0:s.title)||r,description:(null==s?void 0:s.description)||"",image:(null==s?void 0:s.image)||"",isBlogPost:(null==s?void 0:s.isBlogPost)||!1,lastPublished:null==s?void 0:s.datePublished,locked:!l},children:u.map((function(t){return t.id})),parent:a?a.id:null}]})));var t}),[n.nodes]);return console.log("items",k),(0,S.jsx)(u.Fragment,null,(0,S.jsx)(i.PageExplorer,{items:k,rootItemIds:n.rootNodeIds,templates:s,onItemCreate:function(e,n,o,r){var i="SitePage /"+g();t(h.Ws({pageId:i,page:{slug:o,template:r,parent:e?{id:e}:null,children:[],fields:{},pageMetadata:{title:n,description:"",image:"",canonical:"",isBlogPost:!1}}})),P(i)},onItemDelete:function(e){t(h.CT(e)),P(e),j(null)},onItemUpdate:w,onItemMove:function(e,n){t(h.kj({pageId:e,parentPageId:n})),P(e),j(e)},onItemSelect:j,onItemImageClick:function(t){f(t),o.onOpen()}}),o.isOpen&&(0,S.jsx)(C.Z,{mode:"selector",onSelectorClose:o.onClose,onSelectorSelect:function(t){c&&w(c,{image:t.src}),f(null),o.onClose()}}))}))}}]);
//# sourceMappingURL=351-036d994de5cfcb49b73a.js.map